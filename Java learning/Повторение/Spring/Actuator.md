# Spring Boot Actuator

Spring Boot Actuator является подпроектом (sub-project) в проекте Spring Boot. Он построен для собрания и мониторинга инфомации приложения. Вы можете внедрить его в свое приложение и использовать его свойства. Для мониторинга приложения вам нужно получить доступ в endpoint (Конечные точки) построенные в Spring Boot Actuator, одновременно, вы можете создать свои отдельные endpoint если хотите.
# Функции Spring Boot Actuator

**Мониторинг Здоровья и Состояния (Health Monitoring)** - Это самая важная и часто используемая функция. Actuator позволяет в реальном времени понимать, насколько "здорово" ваше приложение. Эндпоинт: `/actuator/health`. Проверяет, способно ли приложение выполнять свою работу. По умолчанию он возвращает простой статус `UP` (работает) или `DOWN` (не работает).
**Сбор Метрик Производительности (Metrics Collection)** - Actuator собирает огромное количество данных о том, как работает ваше приложение. Эти данные необходимы для анализа производительности, поиска узких мест и настройки алертов. Эндпоинт:`/actuator/metrics`. Предоставляет доступ к числовым показателям (метрикам).
**Диагностика и Отладка (Diagnostics & Debugging)** - Эта группа функций помогает разработчикам и инженерам по эксплуатации заглянуть "под капот" работающего приложения, чтобы понять, что пошло не так, без необходимости перезапуска или подключения отладчика.
**Управление и Информирование (Management & Info)** - функция позволяет получать общую информацию о приложении и, в некоторых случаях, управлять его жизненным циклом.

# Как работает Spring Boot Actuator

### /actuator/health — Проверка здоровья приложения

Этот эндпоинт показывает, работает ли приложение и его ключевые зависимости (база данных, брокер сообщений и т.д.).
Его работа основана на интерфейсе **`HealthIndicator`**. Каждая отдельная проверка — это реализация этого интерфейса (например, `DataSourceHealthIndicator` для базы данных). Spring Boot **автоматически создает** нужные индикаторы, анализируя зависимости вашего проекта.
При запросе к `/health` Actuator опрашивает все эти индикаторы и **агрегирует (собирает) их статусы**. Правило простое: если хотя бы один индикатор вернул статус `DOWN`, общий статус всего приложения тоже будет `DOWN`. По умолчанию детали скрыты из соображений безопасности.

### /actuator/loggers — Управление логами

Позволяет просматривать и изменять уровни логирования на лету. Он работает через специальный интерфейс Spring `LoggingSystem`, который напрямую обращается к используемой системе логирования (например, Logback). При изменении уровня он вызывает нативный метод этой системы (например, `logger.setLevel()`), что происходит мгновенно в памяти, без перезапуска приложения.
### /actuator/env — Свойства и конфигурация

Показывает все свойства конфигурации и откуда они взялись. Эндпоинт обращается к центральному объекту Spring `Environment`, который хранит свойства из всех источников (файлы `.properties`, переменные окружения, аргументы запуска) в виде иерархического списка. Он просто перебирает этот список и показывает вам финальную конфигурацию, скрывая при этом чувствительные данные (пароли, ключи).
### /actuator/beans — Все бины приложения

Предоставляет полный список всех бинов (объектов), созданных и управляемых Spring в IoC-контейнере. Он напрямую запрашивает у `ApplicationContext` (сердца Spring) список имен всех бинов, а затем для каждого из них получает детальную информацию: его класс, зависимости, область видимости (scope) и т.д. Это "рентген" вашего приложения.
### /actuator/mappings — Карта всех эндпоинтов

Отображает все HTTP-эндпоинты вашего приложения. Он опрашивает специальные бины `HandlerMapping`, которые отвечают за маршрутизацию запросов. Эндпоинт получает от них финальную карту, где каждому URL-пути и HTTP-методу сопоставлен конкретный метод вашего контроллера.
### /actuator/heapdump и /threaddump — Диагностика JVM

Это обертки над стандартными диагностическими инструментами Java (JVM), доступными через JMX.
- **heapdump**: Командует JVM сделать полный снимок всей оперативной памяти (кучи) и отдает его в виде файла.
- **threaddump**: Просит JVM предоставить "моментальный снимок" состояния всех потоков выполнения и их стектрейсов.
### /actuator/metrics — Метрики производительности

Ваша приборная панель. Показывает числовые показатели работы приложения: использование памяти и CPU, количество и время обработки HTTP-запросов, состояние пулов соединений и многое другое. В основе лежит библиотека **Micrometer**, которая собирает эти данные из разных частей приложения и предоставляет их в едином формате. Эндпоинт просто запрашивает у Micrometer все собранные на данный момент метрики.

# Cвой индикатор

Наряду со встроенными HealthIndicator, предоставляемыми Spring Boot Actuator, мы можем создавать собственные индикаторы состояния. Для этого вам нужно создать класс, который реализует интерфейс HealthIndicator, реализовать его метод health() и вернуть Health в качестве ответа с соответствующей информацией,